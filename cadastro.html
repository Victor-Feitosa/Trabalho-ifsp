<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/stlye.css">
    <title>Reserve.me</title>

</head>

<body class="prestar-body">

 <!--Superior do site-->
    <header>
       
        <nav>
            <div class="space"></div>

            <div class="logo">
                <a href="index.html"><img src="img/RESERVE.ME logo.png" alt="logo"></a>
                
            </div>

            <div class="menu">
                <img src="img/hamburguer.png" alt="menu">
                <div class="nav-lateral">
                    <div class="top"> 
                        <div class="button-2">
                            <a href="login-prestar.html">Prestar Serviço</a>
                        </div>
                    </div>
                    <div class="bottom"> 
                        <div class="button-2">
                            <a href="login.html">Entrar</a>
                        </div>
                        <div class="button-2">
                            <a href="cadastro.html">Criar Conta</a>
                        </div>
                    </div> 
                </div>
            </div>
        </nav>
            
    </header>
    
    <form class="prestar">
        <div class="form-container prestar">
            <!-- Primeira Coluna -->
            <div class="column prestar">

                <div class="form-group prestar">
                    <label for="email">email</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group prestar">
                    <label for="nome">nome</label>
                    <input type="text" id="nome" name="nome" required>
                </div>

                <div class="form-group prestar">
                    <label>Gênero</label><br>
                    <input type="radio" id="masculino" name="genero" value="Masculino">Masculino <br>
                    <input type="radio" id="feminino" name="genero" value="Feminino">Feminino
                </div>

                <div class="form-group prestar">
                    <label for="celular">celular</label>
                    <input type="number" id="celular" name="celular" required>
                </div>

                <div class="form-group prestar">
                    <label for="senha">senha</label>
                    <input type="text" id="senha" name="senha" required>
                </div>

                <div class="form-group prestar">
                    <label for="confirmaSenha">confirma Senha</label>
                    <input type="text" id="confirmaSenha" name="confirmaSenha" required>
                </div>
            </div>
            <!-- Segunda Coluna -->
            <div class="column prestar">
                <div class="form-group prestar">
                    <label for="nascimento">Data de Nascimento</label><br>
                    <input type="date" id="nascimento" name="nascimento" required><br><br>
                </div>

                <div class="form-group prestar">
                    <label>Tipo</label>
                    <select id="tipoDocumento" name="tipoDocumento">
                        <option value="CPF">CPF</option>
                        <option value="RG">RG</option>
                        <option value="CNH">CNH</option>
                    </select><br><br>
                    <label for="numeroDocumento">Documento</label>
                    <input type="text" id="numeroDocumento" name="numeroDocumento" required>
                    <br><br>
                </div>

                
            </div>         
        </div>       
        <!-- Botão no Centro -->
        <div class="button-container prestar">
            <button type="submit">Prestar Serviço</button>
        </div>
    </form>




<script>
   // Seleciona o formulário com a classe "prestar"
const form = document.querySelector('.prestar');

// Adiciona um ouvinte de evento para o evento de envio do formulário
form.addEventListener('submit', async function (event) {
    // Impede o comportamento padrão de enviar o formulário
    event.preventDefault();

    // Obtém os valores dos campos do formulário
    var email = document.getElementById("email").value;
    var nome = document.getElementById("nome").value;
    var genero = document.querySelector('input[name="genero"]:checked').value;
    var celular = document.getElementById("celular").value;
    var senha = document.getElementById("senha").value;
    var confirmaSenha = document.getElementById("confirmaSenha").value;
    var nascimento = document.getElementById("nascimento").value;
    var tipoDocumento = document.getElementById('tipoDocumento').options[document.getElementById('tipoDocumento').selectedIndex].value;
    var numeroDocumento = document.getElementById("numeroDocumento").value;
          
// Validação simples dos campos (você pode aprimorar isso conforme necessário)
if (email === "" || nome === "" || celular === "" || senha === "" ||    confirmaSenha === "" || nascimento === "" || tipoDocumento === "" || numeroDocumento === "") {
        alert("Por favor, preencha todos os campos.");
        return;
    }


    if (senha !== confirmaSenha) {
        alert("As senhas não coincidem. Por favor, verifique.");
        return;
    }

    if (celular.length !== 11) {
        alert("O celular esta incorreto. Por favor, verifique.");
        return;
    }


    // Verificar se a data de nascimento é válida (por exemplo, no formato AAAA-MM-DD)
    if (!validarDataDeNascimento(nascimento)) {
        alert("A data de nascimento não é válida. Use o formato AAAA-MM-DD.");
    }


    // Função para validar a data de nascimento
    function validarDataDeNascimento(dataNascimento) {
        var regexData = /^\d{4}-\d{2}-\d{2}$/; // Formato AAAA-MM-DD
        if (!regexData.test(dataNascimento)) {
            return false;
        }
        var dataParts = dataNascimento.split("-");
        var ano = parseInt(dataParts[0]);
        var mes = parseInt(dataParts[1]);
        var dia = parseInt(dataParts[2]);
        if (mes < 1 || mes > 12 || dia < 1 || dia > 31) {
            return false;
        }
        // Você pode adicionar validações adicionais, como verificar se a data é anterior à data atual.
        return true;
    }


    // Verificar se o número do documento está no formato correto
    if (!validarNumeroDocumento(numeroDocumento, tipoDocumento)) {
        alert("O número do documento não é válido para o tipo selecionado.");
        return;
    }

    // Função para validar o número do documento com base no tipo (CPF, RG, CNH, etc.)
    function validarNumeroDocumento(numero, tipo) {
        switch (tipo) {
            case "CPF":
                // Validar formato de CPF (neste exemplo, apenas validação de formato)
                var regexCPF = /^\d{3}\.\d{3}\.\d{3}-\d{2}$/; // Formato 123.456.789-00
                return regexCPF.test(numero);
            case "RG":
                // Validar formato de RG (neste exemplo, apenas validação de formato)
                var regexRG = /^(\d{2}\.\d{3}\.\d{3}-\d{1}|\d{9})$/; // Formato 12.345.678-9 ou 123456789
                return regexRG.test(numero);
            case "CNH":
                // Validar formato de CNH (neste exemplo, apenas validação de formato)
                var regexCNH = /^\d{11}$/; // Formato 12345678901
                return regexCNH.test(numero);
            default:
                return false; // Tipo de documento desconhecido
        }
    }
        
    const data = {
        email,
		nome,
		genero,
		celular,
		senha,
		confirmaSenha,
		nascimento,
		tipoDocumento,
		numeroDocumento
    };

    // Configuração do objeto fetch
    fetch('http://localhost:3000/cadastro', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
    })

    .then(response => response.json())
    .then(data => {
        console.log('Cadastro realizado com sucesso!', data);
        alert('Cadastro realizado com sucesso!');
        window.location.href ='login.html';
    })
    .catch(error => {
        console.error('Erro durante o cadastro:', error);
    });
});


</script>

 
</body>


</html>